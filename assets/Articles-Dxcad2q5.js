import{r as l,j as t,L as u}from"./index-CM2zJpk4.js";import{f as x}from"./format-CBpsKyOP.js";function m(){const[i,r]=l.useState([]),[e,n]=l.useState(1),[a]=l.useState(5);l.useEffect(()=>{(async()=>{const d=await fetch("https://realworld.habsidev.com/api/articles");if(!d.ok)throw new Error("Failed to load articles");const h=await d.json();r(h.articles)})()},[e]);const s=e*a,c=s-a,o=i.slice(c,s);return{totalPosts:i.length,currentPosts:o,page:e,setPage:n,postPerPage:a}}function p({totalPosts:i,postPerPage:r,setPage:e,currentPage:n}){let a=[];for(let s=1;s<=Math.ceil(i/r);s++)a.push(s);return t.jsx("div",{children:t.jsxs("div",{className:"pagination",children:[t.jsx("button",{onClick:()=>e(s=>Math.max(s-1,1)),children:"<"}),a.map((s,c)=>t.jsx("span",{className:`pagination__num ${n===s?"active":""}`,onClick:()=>e(s),children:s},c)),t.jsx("button",{onClick:()=>e(s=>Math.min(s+1,a.length)),children:">"})]})})}function P(){const{totalPosts:i,currentPosts:r,page:e,setPage:n,postPerPage:a}=m();return t.jsxs(t.Fragment,{children:[t.jsx("ul",{children:r.map(s=>t.jsx(u,{to:`/articles/${s.slug}`,children:t.jsxs("li",{className:"list",children:[t.jsxs("div",{className:"list__left-side",children:[t.jsx("p",{className:"left-side__title",children:s.title}),t.jsx("div",{className:"left-side__tags",children:s.tagList.map((c,o)=>t.jsx("p",{children:c},o))}),t.jsx("p",{children:s.author.bio})]}),t.jsxs("div",{className:"list__right-side",children:[t.jsxs("div",{className:"right-side__profile",children:[t.jsx("span",{children:s.author.username}),t.jsx("span",{children:x(new Date(s.createdAt),"MMMM d, yyyy")})]}),t.jsx("div",{className:"right-side__img",children:t.jsx("img",{src:s.author.image,alt:"author photo"})})]})]})},s.slug))}),t.jsx(p,{totalPosts:i,postPerPage:a,setPage:n,currentPage:e})]})}export{P as default};
